# Anexos Técnicos y Documentación Complementaria

Este apartado final reúne la información técnica detallada y los manuales operativos necesarios para la correcta instalación mantenimiento y comprensión profunda del sistema NADIR. A lo largo de estas líneas se desglosan los aspectos de arquitectura interna los protocolos de despliegue la guía de uso para el usuario final y las consideraciones legales sobre el licenciamiento del software. El objetivo es proporcionar una referencia exhaustiva que complemente el análisis principal del sistema permitiendo a futuros desarrolladores y auditores entender la totalidad del proyecto sin ambigüedades.

La arquitectura del sistema se ha diseñado bajo los principios de Clean Architecture separando estrictamente las capas de presentación dominio y datos para asegurar la independencia del framework y la testabilidad. En el nivel más externo se encuentra la capa de presentación que alberga las actividades y fragmentos de Android implementados mayoritariamente con Jetpack Compose. Esta capa es la responsable de dibujar la interfaz de usuario y capturar las interacciones. Componentes clave como SplashScreen CalibrationScreen y SessionScreen residen aquí junto con sus respectivos ViewModels. La comunicación fluida entre la vista y el modelo de vista se logra mediante flujos de estado reactivos que garantizan que la interfaz siempre refleje la verdad única del sistema. Por debajo de esta capa visible opera la capa de dominio el núcleo puro de la aplicación que contiene las reglas de negocio y los casos de uso. Elementos como StartGuideUseCase o CalibrateUseCase orquestan la lógica sin depender de bibliotecas externas o detalles de implementación del sistema operativo. Finalmente la capa de datos actúa como el proveedor de información implementando las interfaces definidas por el dominio y conectándose con los sensores físicos y los servicios del sistema como el acelerómetro el motor de vibración o el sintetizador de voz.

El manual de instalación y configuración para desarrolladores es esencial para replicar el entorno de construcción del proyecto. El código fuente de NADIR está estructurado como un proyecto Gradle estándar lo que facilita su importación en Android Studio. Para compilar la aplicación se requiere tener instalado el Java Development Kit en su versión diecisiete o superior así como el Android SDK con las herramientas de línea de comandos actualizadas. La gestión de dependencias se realiza a través de un catálogo de versiones centralizado localizado en el directorio gradle bajo el nombre libs versions toml. Este archivo actúa como fuente única de verdad para todas las bibliotecas externas asegurando que todos los módulos del proyecto utilicen las mismas versiones y evitando conflictos de compatibilidad.

El proceso de construcción del proyecto comienza con la sincronización de Gradle que descarga todas las dependencias necesarias desde los repositorios remotos como Google Maven y Maven Central. Una vez sincronizado el desarrollador debe configurar las claves de las APIs en el archivo local properties que no se incluye en el control de versiones por motivos de seguridad. Específicamente si se desea activar la integración con servicios en la nube o herramientas de análisis como Firebase Crashlytics es necesario colocar el archivo de configuración google services json en la raíz del módulo de la aplicación. Sin este archivo el proyecto compilará correctamente pero las funcionalidades de reporte de errores no estarán operativas.

Para generar una versión distribuible de la aplicación se utiliza el comando de Gradle correspondiente a la tarea de ensamblado en modo release. Este proceso no solo compila el código Kotlin y procesa los recursos XML sino que también aplica las reglas de ofuscación y optimización definidas en R8. El resultado es un archivo Android App Bundle optimizado que contiene todos los recursos compilados y el código nativo necesario para las diferentes arquitecturas de CPU soportadas. Es imperativo firmar este archivo con una clave de despliegue segura antes de subirlo a la Google Play Store. La gestión de estas claves de firma debe realizarse con extrema precaución utilizando almacenes de claves encriptados y evitando su exposición en repositorios públicos.

La guía de usuario final describe el flujo de interacción diseñado para maximizar la accesibilidad y la eficacia terapéutica. Al abrir la aplicación por primera vez el usuario es recibido por una pantalla de bienvenida que explica brevemente el propósito de la herramienta. Tras conceder los permisos básicos necesarios aunque el acelerómetro no suele requerir permisos explícitos en versiones modernas de Android el usuario accede a la pantalla principal. El proceso central comienza con la fase de calibración. El sistema instruye al usuario para que adopte una posición cómoda preferiblemente recostado y coloque el teléfono sobre su abdomen. Al iniciar la calibración es crucial permanecer lo más inmóvil posible respirando de manera natural. Durante sesenta segundos el sistema analiza los micromovimientos del dispositivo para establecer el patrón respiratorio basal del usuario.

Una vez completada la calibración el sistema presenta un diagnóstico preliminar del estado de ansiedad basado en la frecuencia respiratoria detectada. Si el usuario se encuentra en un estado de calma se le sugiere una sesión de mantenimiento con respiración coherente para reforzar su variabilidad de la frecuencia cardíaca. Por el contrario si se detectan signos de hiperventilación o pánico el sistema activa automáticamente el protocolo de emergencia de respiración cuatro siete ocho diseñado para inducir una respuesta de relajación rápida mediante la estimulación del nervio vago. El usuario tiene la opción de aceptar la recomendación o seleccionar manualmente otra técnica si así lo prefiere.

Durante la sesión de respiración guiada la pantalla muestra una animación abstracta que se expande durante la fase de inhalación y se contrae durante la exhalación. Esta señal visual se complementa con instrucciones de voz sutiles y patrones de vibración háptica. La vibración es especialmente útil para usuarios que prefieren realizar el ejercicio con los ojos cerrados o en entornos donde no pueden mirar la pantalla. El patrón de vibración varía en intensidad aumentando gradualmente durante la inhalación manteniéndose constante durante la retención y disminuyendo suavemente durante la exhalación creando una sensación táctil de llenado y vaciado que se sincroniza con la respiración del usuario.

El mantenimiento y la evolución del código fuente se rigen por prácticas de integración continua y revisión de código estática. Herramientas como SonarQube se han integrado en el flujo de trabajo para analizar la calidad del código en busca de errores potenciales vulnerabilidades de seguridad y deuda técnica. Cada vez que se realiza un cambio en el código se ejecutan automáticamente las baterías de pruebas unitarias e instrumentadas. Las pruebas unitarias ubicadas en el directorio de test verifican la lógica de los casos de uso y los ViewModels asegurando que las reglas de negocio se cumplan correctamente ante diferentes entradas. Por otro lado las pruebas instrumentadas en el directorio androidTest validan la integración con los componentes del sistema Android como la navegación entre pantallas y el acceso a los sensores hardware.

La documentación de la API interna del proyecto detalla las interfaces y clases principales que componen el sistema. El repositorio de calibración define los métodos para iniciar detener y obtener los resultados del proceso de análisis respiratorio. Su implementación utiliza un servicio de acelerómetro que se suscribe a los eventos del sensor del sistema y aplica un filtro de media móvil para suavizar la señal bruta. El analizador de respiración es el componente encargado de procesar esta señal filtrada detectando los picos y valles que corresponden a los ciclos respiratorios y calculando la frecuencia en tiempo real. Este componente es puramente matemático y no tiene dependencias con el framework de Android lo que facilita su reutilización y prueba en otros entornos.

El sistema de inyección de dependencias basado en Koin organiza los componentes en módulos funcionales. El módulo de la aplicación provee las instancias globales como el contexto y los recursos del sistema. El módulo de datos define cómo se crean los repositorios y las fuentes de datos configurando si son singletons o si se crea una nueva instancia cada vez que se solicitan. El módulo de dominio vincula los casos de uso con sus repositorios correspondientes y el módulo de presentación inyecta los casos de uso en los ViewModels. Esta estructura modular permite reemplazar fácilmente una implementación concreta por otra sin afectar al resto del sistema por ejemplo cambiar el proveedor de texto a voz nativo por un servicio de síntesis de voz en la nube.

En cuanto a las consideraciones legales y de licenciamiento el proyecto NADIR se distribuye bajo una licencia de código abierto permisiva que permite su uso modificación y redistribución tanto para fines académicos como comerciales. Se ha optado por la licencia Apache dos punto cero debido a que ofrece protección de patentes a los usuarios y permite la integración con software propietario sin las restricciones virales de otras licencias libres. Esto fomenta la colaboración de la comunidad y la posibilidad de que otros desarrolladores contribuyan con mejoras o adapten la herramienta a necesidades específicas. Es importante notar que aunque el código es libre los recursos gráficos y la marca NADIR pueden estar sujetos a derechos de autor adicionales y su uso comercial podría requerir permiso explícito de los autores originales.

El manejo de errores y la telemetría son aspectos críticos descritos en los anexos técnicos. La aplicación implementa un sistema global de captura de excepciones que evita que la aplicación se cierre inesperadamente ante errores no controlados. En su lugar se muestra una pantalla de error amigable que permite al usuario intentar la operación nuevamente o enviar un informe de error a los desarrolladores. La integración con Firebase Crashlytics permite monitorear la estabilidad de la aplicación en producción agrupando los errores por tipo y frecuencia y proporcionando trazas de pila detalladas que facilitan la depuración. Además se recopilan métricas de uso anónimas como la duración media de las sesiones o las técnicas de respiración más utilizadas lo que proporciona información valiosa para priorizar el desarrollo de futuras funcionalidades.

La seguridad de los datos biométricos es un tema recurrente en la documentación técnica. Aunque la aplicación no almacena datos identificables del usuario la frecuencia respiratoria y los patrones de movimiento se consideran datos de salud sensibles. Por ello se ha implementado un mecanismo de borrado seguro que elimina cualquier dato temporal de la memoria del dispositivo tan pronto como finaliza la sesión o se cierra la aplicación. No se utiliza almacenamiento persistente para los datos brutos del sensor y cualquier registro histórico se guarda de forma agregada y anónima impidiendo la reidentificación del usuario a partir de los datos almacenados.

El protocolo de despliegue en la tienda de aplicaciones requiere seguir una serie de pasos de verificación manual y automática. Antes de subir una nueva versión es necesario incrementar el código de versión en el archivo de configuración de construcción y actualizar el nombre de la versión para reflejar los cambios realizados. Google Play Console realiza un análisis automático de seguridad y contenido antes de publicar la aplicación verificando que cumple con las políticas de desarrollador y que no contiene malware o código malicioso. Una vez superada esta revisión la actualización se distribuye gradualmente a los usuarios comenzando por un pequeño porcentaje para detectar posibles problemas antes de un lanzamiento global.

Finalmente el anexo de accesibilidad detalla las pautas seguidas para hacer que la aplicación sea inclusiva. Se han utilizado descripciones de contenido en todos los elementos interactivos para asegurar la compatibilidad con los lectores de pantalla. Los tamaños de los objetivos táctiles cumplen con las recomendaciones de diseño de material de al menos cuarenta y ocho por cuarenta y ocho píxeles independientes de la densidad facilitando su uso para personas con dificultades motoras. El soporte para el modo oscuro del sistema no solo ahorra batería en pantallas OLED sino que también reduce la fatiga visual en entornos de baja iluminación mejorando la experiencia de uso nocturno que es frecuente en aplicaciones de relajación y sueño.

Este compendio de anexos técnicos constituye el legado documental del proyecto NADIR asegurando que el conocimiento generado durante su desarrollo perdure y sirva de base para futuras innovaciones en el campo de la salud digital. La transparencia en la arquitectura los procesos y las decisiones de diseño es fundamental para construir confianza en la tecnología y fomentar un ecosistema de desarrollo abierto y colaborativo.